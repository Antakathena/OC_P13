version: 2.1

#orbs:
#  python: circleci/python@2.0.3
#
## Define a job to be invoked later in a workflow.
## See: https://circleci.com/docs/2.0/configuration-reference/#jobs
jobs:
  build-lint-test:
    docker:
      - image: cimg/python:3.10.4
    # By default it uses the project root's requirements.txt.
    # CircleCI will report the results back to your Version Control System (VCS) provider.

    steps:
      - checkout
#  - python/install-packages:
#  pkg-manager: pip

      - run:
            name: install dependencies
            command: pip install -r requirements.txt
      - run:
            name: lint
            command: flake8
      - run:
            name: run tests
            command: pytest

workflows:
  version: 2
  prepare:
    jobs:
      - build-lint-test:
          filters:
            branches:
              only:
                - master
      #        ignore: /.*/